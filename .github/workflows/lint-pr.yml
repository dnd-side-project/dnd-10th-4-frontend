name: 'Lint PR'

on:
  pull_request:
    types: [opened, edited, synchronize]

jobs:
  main:
    name: Title Check
    runs-on: ubuntu-latest
    steps:
      - name: PR íƒ€ì´í‹€ ì²´í¬
        run: |
          title=$(jq -r .pull_request.title "$GITHUB_EVENT_PATH")
          valid_types=("âœ¨ feat: " "ğŸš‘ fix: " "ğŸ’„ design: " "ğŸ“ style: " "ğŸ”¨ refactor: " "ğŸ’¡ comment: " "ğŸ“š docs: " "âœ… test: " "ğŸ“¦ chore: " "ğŸšš rename: " "â– remove: " "ğŸš€ deploy: " "ğŸ‰ init: ")
          regex="^($(IFS=\|; echo "${valid_types[*]}"))"

          echo "PR íƒ€ì´í‹€: $title"
          echo "ìœ íš¨í•œ ì •ê·œì‹: $regex"

          if [[ ! $title =~ $regex ]]; then
            echo "error: PR íƒ€ì´í‹€ì€ ë‹¤ìŒ ë¬¸ìì—´ì¤‘ í•˜ë‚˜ë¡œ ì‹œì‘í•´ì•¼ í•´ìš”: ${valid_types[*]}"
            exit 1
          fi
